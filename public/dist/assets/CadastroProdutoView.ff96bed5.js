import{r as V,a as v,y as C,u as q,q as S,o as d,c as l,b as e,e as s,t as g,g as c,w as U,d as u,v as m,h as M,F as N,x as B,i as D}from"./index.8b45bf7a.js";import{C as E}from"./CategoriasService.71c9b06e.js";import{P as F}from"./ProdutosService.c33b28ad.js";import{m as A}from"./mainStorage.ec5336a9.js";import"./index.36a7d396.js";const R={class:"row mt-5"},z={class:"col-8 m-auto"},L={class:"card text-bg-secondary shadow-lg"},T={key:0},$={class:"text-danger"},j={class:"card-header bg-primary"},G={key:0},H={key:1},I={class:"card-body"},J=["onSubmit"],K={class:"row mb-2"},O={class:"col-6"},Q=e("label",null,"Name",-1),W={class:"row mb-2"},X={class:"col-3"},Y=e("label",null,"Unidade",-1),Z={class:"col-3"},ee=e("label",null,"Valor",-1),te={class:"row mb-2"},oe={class:"col-3"},se=e("label",null,"Estoque",-1),ae={class:"col-3"},re=e("label",null,"Categoria",-1),de=["value"],le={class:"col-1 mt-4"},ie={key:0,class:"btn btn-success",type:"submit",value:"Cadastrar"},ne={key:1,class:"btn btn-success",type:"submit",value:"Atualizar"},ce={__name:"FormProduto",setup(b){let t=V({nome:"",valor:"",unidade:"",estoque:"",categoria_id:"",fornecedor_id:""}),i=v(0),n=v(null),h=v([]),f=C(),y=q();const _=A();let p=F(_.token),w=E(_.token);async function x(){let a=f.params.id;try{let o=await p.fetchProduto(a);i.value=o.data.id,t.nome=o.data.nome,t.valor=o.data.valor,t.unidade=o.data.unidade,t.estoque=o.data.estoque,t.categoria_id=o.data.categoria_id,t.fornecedor_id=_.user_id,console.log(t.value)}catch(o){n.value=o}}async function k(){try{let a=await w.fetchAllCategorias();h.value=a.data}catch(a){console.log(a)}}async function P(){if(i.value)try{let a=await p.updateProduto(t,i.value);alert(a.data.message),y.push("/produtos/listar")}catch(a){n.value=a}else try{t.fornecedor_id=_.user_id;let a=await p.createProduto(t);alert(a.data.message),y.push("/produtos/listar")}catch(a){n.value=a}}return S(()=>{k(),f.params.id&&x()}),(a,o)=>(d(),l("div",R,[e("div",z,[e("div",L,[s(n)?(d(),l("div",T,[e("h3",$,g(s(n)),1)])):c("",!0),e("div",j,[s(i)?(d(),l("h3",G,"Edi\xE7\xE3o de Produto")):c("",!0),s(i)?c("",!0):(d(),l("h3",H,"Cadastro de Produto"))]),e("div",I,[e("form",{onSubmit:U(P,["prevent"])},[e("div",K,[e("div",O,[Q,u(e("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=r=>s(t).nome=r)},null,512),[[m,s(t).nome]])])]),e("div",W,[e("div",X,[Y,u(e("input",{class:"form-control",type:"text","onUpdate:modelValue":o[1]||(o[1]=r=>s(t).unidade=r)},null,512),[[m,s(t).unidade]])]),e("div",Z,[ee,u(e("input",{class:"form-control",type:"text","onUpdate:modelValue":o[2]||(o[2]=r=>s(t).valor=r)},null,512),[[m,s(t).valor]])])]),e("div",te,[e("div",oe,[se,u(e("input",{class:"form-control",type:"text","onUpdate:modelValue":o[3]||(o[3]=r=>s(t).estoque=r)},null,512),[[m,s(t).estoque]])]),e("div",ae,[re,u(e("select",{class:"form-select","onUpdate:modelValue":o[4]||(o[4]=r=>s(t).categoria_id=r)},[(d(!0),l(N,null,B(s(h),r=>(d(),l("option",{value:r.id,key:r.id},g(r.nome),9,de))),128))],512),[[M,s(t).categoria_id]])])]),e("div",le,[s(i)?c("",!0):(d(),l("input",ie)),s(i)?(d(),l("input",ne)):c("",!0)])],40,J)])])])]))}},he={__name:"CadastroProdutoView",setup(b){return(t,i)=>(d(),l("main",null,[D(ce)]))}};export{he as default};
