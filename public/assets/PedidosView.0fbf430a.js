import{a as n}from"./index.36a7d396.js";import{m as g}from"./mainStorage.ec5336a9.js";import{a as f,s as P,l as B,o as m,c as b,b as t,i as v,m as A,F as x,x as w,e as j,t as p,n as y}from"./index.8b45bf7a.js";function z(r){let o="http://localhost:8190/api";function i(e){let a=o+"/pedidos/"+e;return n.get(a,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function c(e){let a=o+"/pedidos/"+e;return n.get(a,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function d(e){let a=o+"/pedido";return n.post(a,e,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function u(e,a){let s=o+"/pedido/"+a;return n.post(s,e,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function h(e){let a=o+"/pedido/deletar/"+e;return n.get(a,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function _(e){let a=o+"/pedido/aprovar/"+e;return n.get(a,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}function l(e){let a=o+"/pedido/recusar/"+e;return n.get(a,{headers:{Accept:"application/json",Authorization:"Bearer "+r}})}return{fetchOwnPedidos:i,fetchPedido:c,createPedido:d,updatePedido:u,deletePedido:h,approve:_,refuse:l}}const V={class:"mt-5 col-10 m-auto"},C={class:"row"},D={class:"row m-1 mb-5"},S=t("h3",{class:"col-10"},"Pedidos",-1),L={class:"col-2"},N=y("Adicionar"),O={class:"row"},k={class:""},F={class:"box"},M={class:"box-body"},R={class:"table table-striped table-bordered"},q=t("thead",null,[t("th",null,"ID"),t("th",null,"Status"),t("th",null,"Valor Total"),t("th",null,"Observa\xE7\xE3o"),t("th",null,"#")],-1),E=t("i",{class:"fa-solid fa-pen-to-square"},null,-1),I=["onClick"],$=t("i",{class:"fa-solid fa-trash-can"},null,-1),G=[$],U={__name:"PedidosView",setup(r){let o=f(!1),i=f([]),c=f(null);const d=g();let u=z(d.token);async function h(){try{o.value=!0;let l=await u.fetchOwnPedidos(d.user_id);i.value=l.data,o.value=!1}catch(l){o.value=!1,c.value=l}}async function _(l){if(confirm("Deseja exluir este registro?")==!0)try{await u.deletePedido(l),alert("Pedido excluida com sucesso!"),h()}catch(e){c.value=e}else return!1}return P(()=>{h()}),(l,e)=>{const a=B("RouterLink");return m(),b("main",V,[t("div",C,[t("div",D,[S,t("div",L,[v(a,{class:"btn btn-success",to:"/pedidos/cadastro"},{default:A(()=>[N]),_:1})])]),t("div",O,[t("div",k,[t("div",F,[t("div",M,[t("table",R,[q,t("tbody",null,[(m(!0),b(x,null,w(j(i),s=>(m(),b("tr",{key:s.id},[t("td",null,p(s.id),1),t("td",null,p(s.status),1),t("td",null,p(s.valor_total),1),t("td",null,p(s.observacao),1),t("td",null,[v(a,{class:"btn btn-info btn-sm me-1",to:{path:"/pedidos/atualizar/"+s.id}},{default:A(()=>[E]),_:2},1032,["to"]),t("button",{class:"btn btn-danger btn-sm ms-1",onClick:H=>_(s.id)},G,8,I)])]))),128))])])])])])])])])}}};export{U as default};
